name: Cypress End-to-end tests ğŸ§ª
on: [pull_request]
jobs:
    run-e2e-tests:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout ğŸ›
              uses: actions/checkout@v2
            - name: Install dependencies ğŸ“¦
              run: npm install
            - name: Start Development Server ğŸ—ï¸
              uses: cypress-io/github-action@v4
              with:
                  start: npm run dev
                  wait-on: 'http://localhost:5173'
                  wait-on-timeout: 200
                  runTests: false
                  install: false
              env:
                  PUBLIC_CONFIGCAT_KEY: ${{ secrets.CONFIGCAT_KEY }}
            - name: Run e2e tests ğŸ§ª
              uses: cypress-io/github-action@v4
              with:
                  # we have already installed all dependencies above
                  install: false
                  command: npm run test:e2e
